# 拼豆像素画生成器

一个基于 Streamlit 的 Web 应用，可以将图片转换为拼豆像素画，并标注每个像素格子需要的拼豆颜色。

## 功能特性

1. **图片像素化**：将图片压缩为指定尺寸的像素画（拼豆板大小）
2. **智能抠图**：可选择启用智能抠图功能，自动去除背景
3. **自定义裁剪**：支持自定义裁剪比例，不限于正方形
4. **颜色映射**：自动将图片颜色映射到拼豆色卡
5. **标注导出**：生成带颜色标注的像素图，方便制作拼豆
6. **PNG 导出**：支持导出像素图和带标注的像素图为 PNG 格式
7. **拼豆统计**：显示每种颜色需要的拼豆数量

## 安装和运行

### 1. 创建虚拟环境（如果还没有）

```bash
python3 -m venv venv
```

### 2. 激活虚拟环境

```bash
source venv/bin/activate
```

### 3. 安装依赖

```bash
pip install -r requirements.txt
```

### 4. 运行应用

```bash
streamlit run pindou.py
```

应用会自动在浏览器中打开，通常地址是 `http://localhost:8501`

## 使用方法

1. **上传图片**：在左侧边栏上传一张图片（支持 JPG、PNG、JPEG 格式）

2. **设置拼豆板尺寸**：
   - 调整目标宽度（格数）
   - 调整目标高度（格数）

3. **裁剪设置**（可选）：
   - 勾选"启用裁剪"
   - 设置裁剪比例（宽度:高度）

4. **图片处理**（可选）：
   - 勾选"启用智能抠图"可以自动去除背景

5. **生成像素图**：
   - 点击"生成像素图"按钮
   - 等待处理完成

6. **查看结果**：
   - 预览像素图效果
   - 查看带标注的像素图（每个格子标注了颜色名称）
   - 查看拼豆统计（每种颜色需要的数量）

7. **导出图片**：
   - 点击"下载像素图 (PNG)"下载原始像素图
   - 点击"下载带标注的像素图 (PNG)"下载带颜色标注的像素图

## 拼豆色卡

当前支持的拼豆颜色：
- 黑色、白色、红色、绿色、蓝色
- 黄色、橙色、紫色、粉色、灰色
- 棕色、肉色、天蓝

## 注意事项

- 首次使用智能抠图功能时，rembg 会自动下载模型文件，可能需要一些时间
- 图片尺寸越大，处理时间越长
- 建议使用清晰、对比度高的图片以获得更好的效果

## 技术栈

- **Streamlit**：Web 应用框架
- **Pillow (PIL)**：图像处理
- **rembg**：智能抠图
- **NumPy**：数值计算

